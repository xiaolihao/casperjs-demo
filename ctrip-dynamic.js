window.ShowPassagerPro||(window.ShowPassagerPro=function(){});window.ToSearchA||(window.ToSearchA=function(){});window.DomReadyIndex||(window.DomReadyIndex=function(){});window.disableEnter||(window.disableEnter=function(){});$.browser.isIE6&&document.getElementById("cui_hd")&&(document.getElementById("cui_hd").style.width="1180px");window.GetServiceAnnouncements=function(){var n,t,i;window.recommendTxt||(n=document.createElement("script"),n.type="text/javascript",n.async=!0,n.src=$("#rmtjurl")[0].value+"/webhome/chs/fltDomestic/rmtj.txt",t=document.getElementsByTagName("script")[0],t.parentNode.insertBefore(n,t),i=function(){var n=window.recommendTxt,u,t,r;if(n&&n.length>0){for(u="",t=0;t<n.length;t++)n[t]&&(r=n[t].split("|"),r!=null&&r.length==3&&(u+='<li><a rel="nofollow" href="'+r[2]+'" target="_blank">&middot;'+r[0]+"<\/a>"));u+='<li class="more"><a rel="nofollow" href="http://pages.c-ctrip.com/webhome/chs/fltDomestic/newsindex.htm" target="_blank">'+online.IndexJsTip.moreAnnouncement+" &gt;&gt;<\/a><\/li>";$("#ulAnnouncement").html(u)}else setTimeout(i,300)},i())},function(n,t,i){function y(){var n;return}function c(n){var i=t("#DirectSpecialPrice"),r=t("#DirectPrev"),u=t("#DirectNext");e.length&&(i[0].style.width="2260px",h(i,u,r,"dl",n?500:708,n?2:3),h(e,e.parent().find(">.next"),e.parent().find(">.prev"),">div",780,n?3:4))}function w(){var n={currentPageNo:1,options:null,setOptions:function(n){this.options=n||{}},run:function(){for(var r=this.options.elements.length%this.options.pageSize==0?parseInt(this.options.elements.length/this.options.pageSize):parseInt(this.options.elements.length/this.options.pageSize)+1,u=(this.currentPageNo-1)*this.options.pageSize,f=this.currentPageNo*this.options.pageSize-1,t,i,n=0;n<this.options.elements.length;n++)this.options.elements[n].style.display=n>=u&&n<=f?"":"none";++this.currentPageNo>r&&(this.currentPageNo=1);t=this;i=function(n){n.run()};setTimeout(function(){i(t)},this.options.delay)}};n.setOptions({elements:t("#pDynamicShowList").find("span"),pageSize:3,delay:5e3});n.run()}var r=n.document,f=n.ServerTime?n.ServerTime.toDate():new Date,u,a,v,h,e,s,l,o,p;return t.log("serverTime",f),u={},u.releaseno=t("#releaseno").length?t("#releaseno").value():"?"+Math.random(),n.adCookieDomain=n.location.host.substr(n.location.host.indexOf(".")+1)+"/",a=(n.WebResourcePath||"R1").match(/R\d/)[0],n.g_adsconfig="http://webresource.c-ctrip.com/ResFlightOnline/"+a+"/Booking/HTML/bkupjs/showNew1.js"+u.releaseno,n.$LAB.script({src:"http://webresource.c-ctrip.com/ResCRMOnline/r1/js/index/aCookie.min.js?20140420temp"}).wait().script({src:'http://crm.ws.ctrip.com/Customer-Market-Proxy/AdCallProxy.aspx?re=ads&adlist=[{"adIDs":"45-159-160-161-162-163-4168-4169","domID":"adpic"}]'}),t.fn.val=t.fn.val||t.fn.value,t.noop=t.noop||function(){},t.fn.parent=t.fn.parent||function(){return this[0]?t(this[0].parentNode||null):t()},t.fn.eq=t.fn.eq||function(n){var t=n>=0?n+1:n-1;return this.slice(n,t)},t.fn.index=t.fn.index||function(n){var t=n?this:this.parent(),i=n||this;return t.indexOf(i)},t.fn.siblings=t.fn.siblings||function(n){n=n||"*";var r=this[0],t=this.parent().find(">"+n),i=t.index(r);return i>=0?t.splice(i,1):t},v=Object.prototype.hasOwnProperty,t.each=function(n,i){var u,f,e,r;if(n.forEach)n.forEach(i);else if(n.each)n.each(i);else if(t.type[n]=="array"){for(u=0,f=n.length;e=f[u++];)if(i.call(e,u)==!1)break}else for(r in n)if(v.call(n,r)&&i.call(n[r],r)==!1)break},t.each(["next","prev"],function(n){t.fn[n]=t.fn[n]||function(){for(var r=n=="prev"?"previousSibling":"nextSibling",i=this[r]();i&&i[0].nodeType!=1;)i=i[r]();return i[0].nodeType==1?i:t()}}),u.now=function(n){var i=new Date,t=i;switch(n){case"timestamp":t=i.getTime();break;case"Ymd":t=i.toFormatString("yyyy/MM/dd");arguments[1]!=undefined&&(t=t.replace(/\//g,arguments[1]));break;case"week":t=i.getDay()}return t},u.css3supports=function(){var n=r.createElement("div"),t="Khtml O Moz Webkit".split(" "),i=t.length;return function(u){if(r.all&&!r.addEventListener)return!1;if(u in n.style||"-ms-"+u in n.style)return!0;for(u=u.replace(/^[a-z]/,function(n){return n.toUpperCase()});i--;)if(t[i]+u in n.style)return!0;return!1}}(),u.animate=function(){var f=u.css3supports("transition"),n=!1,i,r;return f?function(i,r,u,f,e){clearTimeout(n);f/=1e3;t(i).data("defaultCss")||t(i).data("defaultCss",i.style.cssText||"");t(i).css("-moz-transition","all "+f+"s ease-out");t(i).css("-webkit-transition","all "+f+"s ease-out");t(i).css("-ms-transition","all "+f+"s ease-out");t(i).css("transition","all "+f+"s ease-out");i.style.cssText=t(i).data("defaultCss")+";-moz-transition:all {speed}s ease-out;-webkit-transition:all {speed}s ease-out;-ms-transition:all {speed}s ease-out;-o-transition:all {speed}s ease-out;transition:all {speed}s ease-out".replace(/\{speed\}/g,f);t(i).css(r,u);var o=(new Date).getTime();n&&clearInterval(n);n=setInterval(function(){(new Date).getTime()-o>=f*1e3&&(clearInterval(n),t(i).css("-moz-transition","none"),t(i).css("-webkit-transition","none"),t(i).css("-ms-transition","none"),t(i).css("transition","none"),e&&e())},20)}:(i={easeInSine:function(n){return-Math.cos(n*(Math.PI/2))+1},easeOutSine:function(n){return Math.sin(n*(Math.PI/2))}},r=function(n){n.animateTimeId&&clearTimeout(n.animateTimeId);var t=arguments[1]||{},r=t.begin,f=t.change,e=t.duration||500,o=t.field,h=t.ftp||50,c=t.onEnd||function(){},l=t.ease||i.easeOutSine,a=r+f,v=u.now("timestamp"),s=function(){n.animateTimeId=setTimeout(function(){var i=u.now("timestamp"),t=i-v,h=l(t/e);n.style[o]=Math.ceil(r+h*f)+"px";e<=t?(n.style[o]=a+"px",c(),clearTimeout(n.animateTimeId)):s()},1e3/h)};s()},function(n,i,u,f,e){var s=t(n),o;n.animateTimeId&&clearTimeout(n.animateTimeId);o=parseInt(s.css(i),10)||0;r(n,{begin:o,change:parseInt(u,10)-o,duration:f,field:i,onEnd:e})})}(),u.Cookie={set:function(n,t,i,f){i=i||7;var e=u.now();e.setTime(e.getTime()+i*864e5);r.cookie=n+"="+t+"; expires="+e.toGMTString()+"; path=/"+(f?"; domain="+f:"")},get:function(n){var t=r.cookie.match(new RegExp("(^| )"+n+"=([^;]*)(;|$)"));return t!=null?unescape(t[2]):null},del:function(n){var t=u.now(),i;t.setTime(t.getTime()-1);i=u.cookies(n);i!=null&&(r.cookie=n+"="+i+";expires="+t.toGMTString())}},u.ALLCITY={},u.CITYCODE=function(){var r=!1,i=[],n={},f={},e={ready:function(t){r?t&&t(n,f):i.push(t)}},o="http://webresource.c-ctrip.com/code/cquery/resource/address/flight/flight_new_"+(t.config("charset")=="big5"?"big5":"gb2312")+".js"+u.releaseno;return t.jsonp(o,{onload:function(t){for(var h=t.data.split("-"),s,a,l,o=0,c=h.length;o<c;o++)h[o].indexOf("@")!=-1&&(h[o]=h[o].substr(h[o].indexOf("@"))),s=h[o].match(/^@([a-zA-Z]+)(\|)([\u4E00-\u9FA5\uf900-\ufa2d]+)(\|)([A-Z]{3})/),s&&s[3]&&s[5]&&(n[s[5]]=n[s[5]]?n[s[5]]+"|"+s[3]:s[3],f[s[3]]=s[5]);if(r=!0,i.length)for(o=0,c=i.length;o<=c;)e.ready(i[o]),o++;for(a=t.data.split("@"),o=0;o<a.length;o++)l=a[o].split("|"),l[2]&&(u.ALLCITY[l[2]]={PingYin:l[0],Id:l[7]});u.ALLCITY.Inited=!0}}),e}(),u.getFestival=function(){function o(n){return s(n)?i[n-1900]&65536?30:29:0}function s(n){return i[n-1900]&15}function l(n,t){return i[n-1900]&65536>>t?30:29}function a(n){for(var r=348,t=32768;t>8;t>>=1)r+=i[n-1900]&t?1:0;return r+o(n)}function h(n){typeof n=="string"&&(n=new Date(Date.parse(n)));var i,f=0,u=0,r=Math.floor((n.getTime()+22064256e5)/864e5),t={};for(t.dayCyl=r+40,t.monCyl=14,i=1900;i<2050&&r>0;i++)u=a(i),r-=u,t.monCyl+=12;for(r<0&&(r+=u,i--,t.monCyl-=12),t.year=i,t.yearCyl=i-1864,f=s(i),t.isLeap=!1,i=1;i<13&&r>0;i++)f>0&&i==f+1&&t.isLeap==!1?(--i,t.isLeap=!0,u=o(t.year)):u=l(t.year,i),t.isLeap==!0&&i==f+1&&(t.isLeap=!1),r-=u,t.isLeap==!1&&t.monCyl++;return r==0&&f>0&&i==f+1&&(t.isLeap?t.isLeap=!1:(t.isLeap=!0,--i,--t.monCyl)),r<0&&(r+=u,--i,--t.monCyl),t.month=("0"+i).slice(-2),t.day=("0"+(r+1)).slice(-2),t.year+"-"+t.month+"-"+t.day}var n,e,i;try{n=t.config("charset")=="gb2312"}catch(v){n=!0}var r={"0101":n?"元旦":"元旦","0501":n?"劳动节":"勞動節","1001":n?"国庆节":"國慶節","1225":n?"圣诞节":"聖誕節"},c=f.getFullYear(),u="0404";return",2014,2015,2018,2019,2022,2023,2026,2027,2030,2031,2034,2035,2038,2039,2043,2047,".indexOf(","+c+",")>-1&&(u="0405"),r[u]=n?"清明节":"清明節",e={"0101":n?"春节":"春節","1230":n?"除夕":"除夕","0115":n?"元宵节":"元宵節","0505":n?"端午节":"端午節","0815":n?"中秋节":"中秋節"},i=[19416,19168,42352,21717,53856,55632,91476,22176,39632,21970,19168,42422,42192,53840,119381,46400,54944,44450,38320,84343,18800,42160,46261,27216,27968,109396,11104,38256,21234,18800,25958,54432,59984,28309,23248,11104,100067,37600,116951,51536,54432,120998,46416,22176,107956,9680,37584,53938,43344,46423,27808,46416,86869,19872,42448,83315,21200,43432,59728,27296,44710,43856,19296,43748,42352,21088,62051,55632,23383,22176,38608,19925,19152,42192,54484,53840,54616,46400,46496,103846,38320,18864,43380,42160,45690,27216,27968,44870,43872,38256,19189,18800,25776,29859,59984,27480,21952,43872,38613,37600,51552,55636,54432,55888,30034,22176,43959,9680,37584,51893,43344,46240,47780,44368,21977,19360,42416,86390,21168,43312,31060,27296,44368,23378,19296,42726,42208,53856,60005,54576,23200,30371,38608,19415,19152,42192,118966,53840,54560,56645,46496,22224,21938,18864,42359,42160,43600,111189,27936,44448],function(n,t,i){var s,c,u,f,o;return t=("0"+t).slice(-2),i=("0"+i).slice(-2),r[t+i]?s=r[t+i]:(c=h(n+"/"+t+"/"+i),u=c.substr(5).replace("-",""),u=="1229"&&(f=new Date(Date.parse(n+"/"+t+"/"+i)+864e5),o=h(f.getFullYear()+"/"+("0"+(f.getMonth()+1)).slice(-2)+"/"+("0"+f.getDate()).slice(-2)),o=o.substr(5).replace("-",""),o=="0101"&&(u="1230")),s=e[u]||""),s}}(),u.Calendar=function(){var e=n.Date,nt=t("#divLowestPriceCalendarLoading,#pLowestPriceCalendarIocLoading"),l=t("#HiddenLowestPriceDepartCity"),a=t("#HiddenLowestPriceArriveCity"),i=t("#LowestPriceDepartCity"),o=t("#LowestPriceArriveCity"),y=t("#spanCalendar"),w=t("#CalendarPrev"),b=t("#CalendarNext"),h,k=n.online.IndexJsTip,p;y[0].style.cssText="height: 389px; overflow: hidden;width: 100%; margin-top: 0px;";p=r.createElement("div");p.className="alert_box";p.style.cssText="left:0px;top:0px";y.parent().append(p);var c=0,v=[],tt=t("p.tip_none")[0],d=t.config("charset")=="gb2312",g={noAriLine:d?"无直飞航班":"無直飛航班",noAriport:d?"没有机场":"沒有機場",noData:d?"暂无低价数据":"暫無低價數據",searchPrice:d?"查询实时机票价格":"查詢實時機票價格"},s={init:function(){var p=u.Cookie.get((t.config("charset")=="big5"?"B":"")+"LowestPriceCalendarCity"),k;p?(p=p.split("|"),p.length&&p[0]!=p[1]&&(l.value(p[0]),a.value(p[1]),p[2]&&p[3]?(i.value(p[2]),o.value(p[3]),i.attr("data-oldval",i.value()),o.attr("data-oldval",o.value()),s.render()):u.CITYCODE.ready(function(n){i.value(n[p[0]].indexOf("|")>-1?n[p[0]].split("|")[0]:n[p[0]]);o.value(n[p[1]].indexOf("|")>-1?n[p[1]].split("|")[0]:n[p[1]]);i.attr("data-oldval",i.value());o.attr("data-oldval",o.value());s.render()}))):l.value()==""||a.value()==""||i.value()==""||o.value()==""?(l.value("SHA"),a.value("BJS"),i.value("上海"),o.value("北京"),i.attr("data-oldval",i.value()),o.attr("data-oldval",o.value()),s.render()):s.render();i.parent().find("a.lowprice_change").attr("hidefocus","true").attr("tabindex",-1).css("outline","none").bind("click",function(n){var t,r;if(n.preventDefault(),l.value()==a.value())return!1;i.attr("data-oldval")!=""&&o.attr("data-oldval")!=""&&(t=l.value(),l.value(a.value()),a.value(t),r=i.value(),i.value(o.value()),o.value(r),i.attr("data-oldval",i.value()),o.attr("data-oldval",o.value()),s.render())});y.bind("click",function(i){var r;if(i.preventDefault(),r=t(i.target),r.is("td[data-date]")||r.parent().is("td[data-date]")||r.parent().parent().is("td[data-date]")){r.parent().is("td[data-date]")&&(r=r.parent());r.parent().parent().is("td[data-date]")&&(r=r.parent().parent());var o=r.attr("data-date").replace(/-/g,"/"),s=new e(e.parse(o)).getTime(),h=f.toStdDateString().toDate().getTime(),u=parseInt((s-h)/864e5);n.location.href="/domestic/booking/"+l.value().split(",")[0]+"-"+a.value().split(",")[0]+"-day-"+u+".html"+(0==u?"?SortByPrice=true&ddate="+r.attr("data-date").replace(/\//g,"-"):"?SortByPrice=true")+"#ctm_ref=fd_in_lp_se_b_a"}});k=function(){c===0?w.addClass("prev_disable"):c===v.length-1?b.addClass("next_disable"):(w.removeClass("prev_disable"),b.removeClass("next_disable"));u.animate(h[0],"marginTop",-v[c]+"px",200);c==1&&v[c]<390?(h.find("tr[data-key=0]").last().removeClass("prevmonth"),h.find("tr[data-key=1]").first().removeClass("nextmonth")):c==0&&v[1]<390&&(h.find("tr[data-key=0]").last().addClass("prevmonth"),h.find("tr[data-key=1]").first().addClass("nextmonth"));var n=r.getElementById("CalendarFix");n&&(c==0?u.animate(n,"marginTop","65px",200):c==1&&u.animate(n,"marginTop",0,200))};w.bind("click",function(n){n.preventDefault();c>0&&(c--,k())});b.bind("click",function(n){n.preventDefault();c<v.length-1&&(c++,k())})},setEmpty:function(){y.html('<table class="calendar"><tr><th><\/th><td><\/td><td><\/td><td><\/td><td><\/td><td><\/td><td><\/td><td><\/td><\/tr><tr><th><\/th><td><\/td><td><\/td><td><\/td><td><\/td><td><\/td><td><\/td><td><\/td><\/tr><tr><th><\/th><td><\/td><td><\/td><td><\/td><td><\/td><td><\/td><td><\/td><td><\/td><\/tr><tr><th><\/th><td><\/td><td><\/td><td><\/td><td><\/td><td><\/td><td><\/td><td><\/td><\/tr><tr><th><\/th><td><\/td><td><\/td><td><\/td><td><\/td><td><\/td><td><\/td><td><\/td><\/tr><tr><th><\/th><td><\/td><td><\/td><td><\/td><td><\/td><td><\/td><td><\/td><td><\/td><\/tr><\/table>');w.addClass("prev_disable");b.addClass("next_disable")},renderAjax:null,render:function(){var n,r,f;try{this.renderAjax&&this.renderAjax.abort&&this.renderAjax.abort()}catch(e){}i.attr("data-oldval")!=""&&o.attr("data-oldval")!=""&&(n=l.value(),r=a.value(),n.indexOf(",")>-1&&(n=n.split(",")[0]),r.indexOf(",")>-1&&(r=r.split(",")[0]),f="/Domestic/home/LowestPriceCalendar/"+n+"/"+r+"?"+Math.random(),s.loading.show(),this.renderAjax=t.ajax(f,{onabort:function(){},onerror:function(){s.renderAjax=null},onsuccess:function(f){var e,p,d,ut,nt,et,ft,rt,it;if(s.renderAjax=null,u.Cookie.set((t.config("charset")=="big5"?"B":"")+"LowestPriceCalendarCity",n+"|"+r+"|"+i.value()+"|"+o.value()),t.browser.isIE6&&f.responseText.indexOf("Error")>-1)e={Error:{Code:"BTH"}};else try{e=t.browser.isIE6?eval(f.responseText):eval("("+f.responseText+")")}catch(ot){e={Error:{Code:0}}}if(s.loading.hide(),y.css("marginTop",0),c=0,w[0].className="prev prev_disable",b[0].className="next",e.Error&&e.Error.Code)return s.setEmpty(),e.Error.Code=="BTH"?s.showTip("很抱歉，"+i.value()+"-"+o.value()+g.noAriLine):s.showTip(),!1;p=s.getHTML(e);y.html(p.html);h=t("#tableCalendar");try{d=h.find("tr[data-key=3]").eq(1).find("th");d.html()==""&&(ut=d.parent().attr("data-m").split("-"),d.html("<span>"+ut[0]+k.year+"<\/span>"+parseInt(ut[1],10)+k.month),d.addClass("calendarThPadding"))}catch(ot){}try{for(nt in p.lowest)p.lowest.hasOwnProperty(nt)&&p.lowest[nt]!==!1&&y.find("tr[data-m="+nt.replace("/","-")+"] td[price="+p.lowest[nt]+"]").addClass("lowest");p.isEmpty==!0?(s.setEmpty(),s.loading.hide(),et="/domestic/booking/"+l.value()+"-"+a.value()+"-day-1.html?SortByPrice=true#ctm_ref=fd_in_lp_se_b_a",s.showTipNoResult(i.value(),o.value(),et)):(tt.style.display="none",t("#divLowestPriceCalendarLoading")[0].style.display="none");ft=h.find("tr[data-key=0]");rt=y.offset().top;v=[0,h.find("tr[data-key=1]").first().offset().top-rt,h.find("tr[data-key=2]").first().offset().top-rt];h.find("tr[data-key=3]").length&&v.push(h.find("tr[data-key=3]").first().offset().top-rt);ft.length<=2&&(it=h.find("tr[data-key=1]").eq(1).find("th").get(0),it.style.cssText="position:relative;vertical-align:top;height:65px;text-align:left",it.innerHTML='<div id="CalendarFix" style="width:'+(it.clientWidth||118)+'px;padding:10px 0;height:45px;text-align:center;border:none;position:absolute;margin-top:65px">'+it.innerHTML+"<\/div>",v[1]++);v[1]<390&&(ft.last().addClass("prevmonth"),h.find("tr[data-key=1]").first().addClass("nextmonth"))}catch(ot){}}}))},getHTML:function(n){var tt=0,p=this,w=function(n){for(var i={},t=0,r=u.now("Ymd","/"),f,r=r.substr(0,r.lastIndexOf("/")),o=new e(e.parse(r.replace("-","/")+"/01")).getTime();n[t];)n[t].DepartTime=n[t].DepartTime.replace(/-/g,"/"),f=n[t].DepartTime.substr(0,n[t].DepartTime.lastIndexOf("/")),new e(e.parse(f.replace("-","/")+"/01")).getTime()>=o&&(i[f]||(tt++,i[f]=[]),i[f].push(n[t])),t++;return p.fixMonthPosition=i[r]&&i[r].length<=14?!0:!1,i}(n),it="",a={},rt=undefined,h=0,v=new e(e.parse(u.now("Ymd","/"))).getTime(),ut=!0,i,t,b,d,g,ft,et,y,n,l,o,nt;for(i in w)if(w.hasOwnProperty(i)){var f=w[i],r=0,s,c=0;for(a[i]=!1,t="";f[r];)r==0&&(t+='<tr data-key="'+h+'" data-m="'+i.replace("/","-")+'"><th><\/th>',c++,b=new e(e.parse(f[0].DepartTime)).getDay(),t+=b>0?new Array(b+1).join('<td class="none"><\/td>'):""),o=new e(e.parse(f[r].DepartTime)),l=o.getDay(),r!=0&&l==0&&(c++,d=i.split("/"),t+='<tr data-key="'+h+'" data-m="'+i.replace("/","-")+'">'+(c==2?'<th class="calendarThPadding"><span>'+d[0]+k.year+"<\/span>"+d[1]+k.month+"<\/th>":"<th><\/th>")),f[r].Price===0?(g='<span class="date">'+o.getDate()+"<\/span>",v<=o.getTime()&&(g=this.getDateStr(f[r].DepartTime,v,o)),t+='<td class="none" data>'+g+"<span>"+(v>=o.getTime()?"--":"暂无数据")+"<\/span><\/td>"):(ut=!1,rt=h==0&&rt==undefined?!0:!1,a[i]=a[i]===!1||f[r].Price<a[i]?f[r].Price:a[i],t+="<td price="+f[r].Price+' data-date="'+f[r].DepartTime+'">'+this.getDateStr(f[r].DepartTime,v,o)+'<span class="price"><dfn>&yen;<\/dfn>'+f[r].Price+"<\/span><\/td>"),l==6&&(t+="<\/tr>"),s=o,r++;if(h==tt-1)for(ft=new e(s.getFullYear(),s.getMonth()+1,0).getDate(),et=s.getDate(),y=et+1;y<=ft;y++)n=s.getFullYear()+"/"+("0"+(s.getMonth()+1)).slice(-2)+"/"+("0"+y).slice(-2),l=new e(e.parse(n)).getDay(),l==0&&(c++,t+='<tr data-key="'+h+'" data-m="'+i.replace("/","-")+'"><th><\/th>'),o=new e(e.parse(n)),t+='<td data-date="'+n+'">'+p.getDateStr(n,v,o)+'<span style="cursor:pointer;" class="search">点击查询<\/span><\/td>',l==6&&(t+="<\/tr>"),s=new e(e.parse(n));s.getDay()!=6&&(t+=new Array(Number(7-s.getDay())).join('<td class="none"><\/td>'),t+="<\/tr>");c<6&&c>3&&(nt='<tr data-key="'+h+'" data-m="'+i.replace("/","-")+'"><th><\/th><td class="none"><\/td><td class="none"><\/td><td class="none"><\/td><td class="none"><\/td><td class="none"><\/td><td class="none"><\/td><td class="none"><\/td><\/tr>',c<5&&(t+=nt),t+=nt);it+=t;h++}return{html:'<table id="tableCalendar" class="calendar"><tbody>'+it+"<\/tbody><\/table>",lowest:a,isEmpty:ut}},getDateStr:function(t,i,r){t=t.split("/");var f=t[0],e=("0"+t[1]).slice(-2),o=("0"+t[2]).slice(-2),u=n.Utils.getFestival(f,e,o);return'<span class="date '+(u?"festival":"")+'">'+(u||(i==r.getTime()?k.today:r.getDate()))+"<\/span>"},showTip:function(n){var i=t("p.tip_none"),r=i.html();return i.css("white-space","nowrap"),function(u){i.html(u||r);i[0].style.display="block";i[0].offsetWidth&&(i[0].style.marginLeft=-i[0].offsetWidth/2+"px");t("#divLowestPriceCalendarLoading")[0].style.display="block";n.style.display="none"}}(p),showTipNoResult:function(n,i,r){p.innerHTML="<p>很抱歉，"+n+"-"+i+g.noData+'。 <br/><a class="alert_box_btn" href="'+r+'" target="_blank">'+g.searchPrice+"<\/a><\/p>";p.style.display="block";t("#divLowestPriceCalendarLoading")[0].style.display="block";t("p.tip_none")[0].style.display="none"},loading:{show:function(){p.style.display="none";tt.style.display="none";nt.each(function(n){n[0].style.display="block"})},hide:function(){nt.each(function(n){n[0].style.display="none"})}}};return{init:s.init,render:s.render,showTip:s.showTip}}(),u.Lazyload=function(){var f=[],u=",",h=function(n){var i,t;return n.getBoundingClientRect?(t=n.getBoundingClientRect(),t.top=t.top-(r.documentElement.clientTop||0),t.left=t.top-(r.documentElement.clientLeft||0),t):(i=function(){for(var i=n.offsetTop,r=n.offsetLeft,t=n.offsetParent;t;)i+=t.offsetTop,r+=t.offsetLeft,t=t.offsetParent;return{left:r,top:i}}(),{left:i.left-Math.max(r.documentElement.scrollTop,r.body.scrollTop),top:i.top-Math.min(r.documentElement.clientHeight,r.body.clientHeight)})},c=function(){return Math.min(r.documentElement.clientHeight,r.body.clientHeight)},i,e=function(){var t,u,r;if(i.length)for(t=0;i[t]&&i[t].nodeType==1;)u=h(i[t])||{left:0,top:0},u.top>0&&u.top<c()&&(r=i[t].getAttribute("data-lazyload")||i[t].getAttribute("_src"),n[r]&&typeof n[r]=="function"?n[r].call(i[t]):i[t].src=r+"?r="+Math.random(),i[t].removeAttribute("data-lazyload"),i[t].removeAttribute("_src"),i[t]=null),t++},o=null,s=function(){var n=arguments[0],r,h;if(arguments.length>1&&(n=Array.prototype.slice.call(arguments)),typeof n=="string"&&n.indexOf(u)>-1&&(n=n.split(u)),Object.prototype.toString.call(n)=="[object Array]")for(r=0,h=n.length;r<h;r++)s(n[r]);else if(typeof n=="string"){if((u+f.join(u)+u).indexOf(u+n+u)>-1)return;f.push(n);o&&clearTimeout(o);o=setTimeout(function(){i=t(f.join(u)).toArray();e()},30)}};return{init:function(){var r=!1;i=t(f.join(u)).toArray();t(n).bind("scroll",function(){r&&clearTimeout(r);r=setTimeout(function(){e()},100)});e()},add:s}}(),n.Utils=u,t.ready(function(){function v(n){return n.value.trim()==""||n.value==n.getAttribute("mod_notice_tip")}function ui(){var n="";return s=="M"?n=t("#DepartDate2TextBox")[0]:s=="D"&&(n=t("#ReturnDepartDate1TextBox")[0]),n&&!v(n)?(t("#DDate2").value(n.value),n=escape(n.value)):n="",n}function fi(){var i="",r=escape(t("#DCity1")[0].value),u=escape(t("#ACity1")[0].value),n;return(t("#PassengerQuantity")[0].value>=10||r==""||u=="")&&(n={DCity1:escape(t("#DCity1")[0].value.split(",")[0]),ACity1:escape(t("#ACity1")[0].value.split(",")[0]),DCityName1:escape(t("#DepartCity1TextBox")[0].value),ACityName1:escape(t("#ArriveCity1TextBox")[0].value),DDate1:escape(t("#DepartDate1TextBox")[0].value)},s=="M"?(n.ACityName1=escape(t("#TransitCityTextBox")[0].value),n.ACityName2=escape(t("#ArriveCity1TextBox")[0].value),n.ACity1=escape(t("#TransitCity")[0].value),n.ACity2=escape(t("#ArriveCity1TextBox")[0].value),n.DDate2=escape(t("#DepartDate2TextBox")[0].value)):s!="D"||v(t("#ReturnDepartDate1TextBox")[0])||(n.DDate2=escape(t("#ReturnDepartDate1TextBox")[0].value)),i=(t("#PassengerQuantity")[0].value==10?"/Domestic/MyToolBox/FlightTeamOrder.aspx?":"/domestic/booking/Search/FirstRoute/?")+wt(n)),i}function ei(){var r,i;if(lt())SetSearchCookie(),r=fi(),r?n.location.href=r:s!="M"&&v(t("#ReturnDepartDate1TextBox")[0])?(t("#ReturnDepartDate1TextBox")[0].value="",t("#DDate2").value(""),t("#IsSingleSearchPost")[0].value="T",t("#DDate1")[0].value=escape(t("#DepartDate1TextBox")[0].value),t("#SEOAirlineDibitCode")[0].value=escape(t("#AirlineSelect").value()),t("#DCityName1")[0].value=t("#DepartCity1TextBox")[0].value,t("#ACityName1")[0].value=t("#ArriveCity1TextBox")[0].value,t("#SendTicketCity")[0].value=v(t("#SendTicketTextBox")[0])?"":t("#SendTicketTextBox")[0].value,t("#RDate").length>0&&(t("#RDate")[0].value=""),t(":radio[name=FlightSearchType]")[0].checked="checked",t("#IsSensitive").length&&(t("#IsSensitive")[0].value="F"),ft[0].action="http://"+n.location.host+"/booking/"+t("#DCity1")[0].value+"-"+t("#ACity1")[0].value+"-day-1.html",ft[0].submit()):(i="http://"+n.location.host+"/booking/"+$Doms.DepartCity1Control.value+"-"+(s!="M"?$Doms.ArriveCity1Control.value:t("#TransitCity")[0].value),i+="-"+escape($Doms.ClassTypeControl.filter(":checked").value())+"-"+escape(t("#AirlineSelect").value()),i+="-"+s+"-"+escape($Doms.PassengerTypeControl.value)+"-"+escape($Doms.PassengerQuantityControl.value)+"/",o("dayoffset",oi(t("#DepartDate1TextBox")[0].value.toDate()),"J_filghtSearch2","input"),o("ddate1",s=="M"?t("#DepartDate1TextBox2").value():t("#DepartDate1TextBox").value(),"J_filghtSearch2","input"),o("ddate2",ui(),"J_filghtSearch2","input"),o("dcityname1",t("#DepartCity1TextBox")[0].value,"J_filghtSearch2","input"),o("acityname1",s=="M"?t("#TransitCityTextBox")[0].value:escape($Doms.ArriveCity1TextBoxControl.value),"J_filghtSearch2","input"),o("acityname2",s=="M"?$Doms.ArriveCity1TextBoxControl.value:"","J_filghtSearch2","input"),o("acity2",s=="M"?$Doms.ArriveCity1Control.value:"","J_filghtSearch2","input"),o("sendticketcity",v($Doms.SendTicketCityTextBoxControl)?"":$Doms.SendTicketCityTextBoxControl.value,"J_filghtSearch2","input"),et.action=i.toLowerCase(),et.submit());else return!1}function oi(n){var t=f,i=new Date(n),r=i.getTime()-t.getTime();return Math.floor(r/864e5)+1}function li(n,t){var i=Math.round((t.toDate()-n.toDate())/864e5);return i>0?i:1}function o(n,i,u,f){if(t("#"+n).length==0){var e=r.createElement(f);e.id=n;e.name=n;e.value=i;e.type="hidden";t(e).appendTo(t("#"+u))}else t("#"+n).value(i)}function ai(n,t){var i=n.toDate().addDays(t);return i.toFormatString("yyyy-MM-dd")}function g(n,i){setTimeout(function(){var r,u,f;t("#"+n).attr("mod_address_focusnext")=="true"&&t("#"+n).attr("nextfocusid")?r=t("#"+t("#"+n).attr("nextfocusid"))[0]:(u=kt[s][n],!u&&i&&t("#search_btn").trigger("click"),r=u?t("#"+u)[0]:null);r&&r.tagName.toLowerCase()=="input"&&(i||r.value==""||r.value==r.getAttribute("mod_notice_tip")||t("#"+n).value()==r.value)&&(f=t("container:first"),f.find(">div").length==2&&id=="FD_TranDate"&&focusEL.id=="FD_DestCity"&&f.find(">div:last").remove(),r.focus())},10)}var p,rt,ut,wt,ft,et,d,bt,kt,gt;n.Utils.Calendar.init();setTimeout(function(){n.WebResourcePath&&!cQuery.storage.get("BookIndex_BigFiveCheck")&&cQuery.jsonp(WebResourcePath+"/javascript/BigFiveCheck.js",{charset:"utf-8",onload:function(n){cQuery.storage.set("BookIndex_BigFiveCheck",n.t+","+n.s);cQuery.storage.expire("BookIndex_BigFiveCheck",21600)}});n.WebResourcePath&&!cQuery.storage.get("BookIndex_CityData")&&cQuery.jsonp(WebResourcePath+"/javascript/CityData.js",{charset:"gb2312",onload:function(n){cQuery.storage.set("BookIndex_CityData",cQuery.stringifyJSON(n));cQuery.storage.expire("BookIndex_CityData",21600)}})},1e3);try{r.documentElement.scrollTop=0}catch(bi){r.body.scrollTop=0}t("#ulAnnouncement").attr("data-lazyload","GetServiceAnnouncements");n.Utils.Lazyload.add("#ulAnnouncement,#HomePageRecommendContainer img[_src]");n.Utils.Lazyload.init();p=r.getElementById("HomePageRecommendContainer");p&&p.style&&(p.style.width=(p.children.length+4)*278+"px");var a=t("#search_advform"),nt=t(a[0].parentNode),st=t(".searchbox"),ht=[parseInt(nt.css("height"),10),parseInt(a.css("height"),10)],ct=["426px","152px"],tt=!1;a.css("display","none");t("#btnAdvancdSearch").bind("click",function(t){t.preventDefault();tt===!1?(a.css("display","block"),n.Utils.animate(nt[0],"height",ct[0],200),n.Utils.animate(a[0],"height",ct[1],200),st.addClass("do_advsearch"),this.className="unshow",tt=!0):(n.Utils.animate(nt[0],"height",ht[0]+"px",200),n.Utils.animate(a[0],"height",ht[1]+"px",200),this.className="show",st.removeClass("do_advsearch"),tt=!1,setTimeout(function(){a.css("display","none")},220))});t("#btnAdvancdSearch").attr("tabindex",-1).bind("mousedown",function(){return!1});t("#btnAdvancdSearch").attr("tabindex",-1).attr("hidefocus",!0).css("outline","none");t.browser.isIE6&&(t("#btnAdvancdSearch").attr("unselectable","on"),t("#btnAdvancdSearch")[0].onfocus=function(){this.blur()});w();var e=i.msg.ERROR_FLIGHT,l={elemCache:{},config:{S:["DepartCity1TextBox|empty","ArriveCity1TextBox|empty,same.DepartCity1TextBox","DepartDate1TextBox|empty,errorDate,before,limit"],D:["DepartCity1TextBox|empty","ArriveCity1TextBox|empty,same.DepartCity1TextBox","DepartDate1TextBox|empty,errorDate,before,limit","ReturnDepartDate1TextBox|errorDate,before.DepartDate1TextBox,limit"],M:["DepartCity1TextBox|empty","DepartDate1TextBox2|empty,errorDate,before,limit","TransitCityTextBox|empty,same.DepartCity1TextBox,same.ArriveCity1TextBox","DepartDate2TextBox|empty,errorDate,before.DepartDate1TextBox2,limit","ArriveCity1TextBox|empty"]},errorTips:{empty:{DepartCity1TextBox:e[0],ArriveCity1TextBox:e[1],DepartDate1TextBox:e[3],DepartDate1TextBox2:e[3],TransitCityTextBox:e[13],ReturnDepartDate1TextBox:e[15],DepartDate2TextBox:e[3]},same:{DepartCity1TextBox:e[2],ArriveCity1TextBox:e[2],TransitCityTextBox:e[14]},before:{ReturnDepartDate1TextBox:e[11],DepartDate2TextBox:e[12],DepartDate1TextBox:e[4],DepartDate1TextBox2:e[4]},limit:{DepartDate1TextBox:e[6],DepartDate1TextBox2:e[6],ReturnDepartDate1TextBox:e[6],DepartDate2TextBox:e[6]}},getCityCode:function(n){return this.getElement(this.getElement(n).getAttribute("mod_address_reference")).value.split(",")[0]},getValue:function(n){var t=this.getElement(n).value.trim();return t==this.getElement(n).getAttribute("mod_notice_tip")?"":t},isbefore:function(n,t){var i=(t?this.getValue(t):f.toStdDateString()).toDate();return this.getValue(n)!=""&&this.getValue(n).toDate()<i?this.errorTips.before[n]:!1},issame:function(n,t){return this.getValue(n)==this.getValue(t)||this.getCityCode(n)==this.getCityCode(t)?this.errorTips.same[n]:!1},isempty:function(n){return this.getValue(n)==""?this.errorTips.empty[n]:!1},iserrorDate:function(n){var t=this.getValue(n);return t!=""&&!t.toDate()?this.errorTips.empty[n]:!1},islimit:function(n){var t=f.toStdDateString().toDate();return t.getMonth()+1==2&&t.getDate()==29&&(t=t.setDate(28)),t.setFullYear(parseInt(t.getFullYear())+1),t<this.getValue(n).toDate()?this.errorTips.limit[n]:!1},getElement:function(n){return this.elemCache[n]||(this.elemCache[n]=r.getElementById(n)),this.elemCache[n]}},lt=function(n){var u,f,o,p;l.errorTips.limit.DepartDate1TextBox=n?e[9]:e[6];l.errorTips.limit.DepartDate1TextBox2=l.errorTips.limit.ReturnDepartDate1TextBox=l.errorTips.limit.DepartDate2TextBox=l.errorTips.limit.DepartDate1TextBox;var h=l.config[s],r=!1,c=!1;for(u=0;u<h.length;u++){var a=h[u].split("|"),v=a[0],y=a[1].split(",");for(f=0;f<y.length;f++)if(o=y[f].split("."),p=o[0],o.shift(),r=l["is"+p].apply(l,[v].concat(o)),r)break;if(r){c=t("#"+v);break}}return r?(setTimeout(function(){i.validateObj.method("show",{$obj:c,data:r,removeErrorClass:!0,hideEvent:"blur",isFocus:!0})},30),!1):!0};$Doms={Route1InputArea:t("#Route1InputArea")[0],Route1Title:t("#Route1Title")[0],Route1ReturnDepartDateInputArea:t("#Route1ReturnDepartDateInputArea")[0],Route2InputArea:t("#Route2InputArea")[0],Route2Title:t("#Route2Title")[0],AdvanceSearchOptionArea:t("#AdvanceSearchOptionArea")[0],SimpleSearchOptionSwitch:t("#SimpleSearchOptionSwitch")[0],AdvanceSearchOptionSwitch:t("#AdvanceSearchOptionSwitch")[0],PassengerQuantitySelectControl:t("#PassengerQuantity")[0],SendTicketCityTextBoxControl:t("#SendTicketTextBox")[0],DepartCity1TextBoxControl:t("#DepartCity1TextBox")[0],ArriveCity1TextBoxControl:t("#ArriveCity1TextBox")[0],DepartDate1TextBoxControl:t("#DepartDate1TextBox")[0],ReturnDepartDate1Control:t("#ReturnDepartDate1TextBox")[0],DepartCity2TextBoxControl:t("#DepartCity2TextBox")[0],ArriveCity2TextBoxControl:t("#ArriveCity2TextBox")[0],DepartDate2TextBoxControl:t("#DepartDate2TextBox")[0],DepartCity1Control:t("#DCity1")[0],ArriveCity1Control:t("#ACity1")[0],DepartDate1Control:t("#DDate1")[0],DepartCity2Control:t("#DCity2")[0],ArriveCity2Control:t("#ACity2")[0],DepartDate2Control:t("#DDate2")[0],ClassTypeControl:t(":radio[name=ClassType]"),PassengerQuantityControl:t("#PassengerQuantity")[0],SendTicketCityControl:t("#SendTicketCity")[0],PassengerTypeControl:t("#PassengerType")[0]};t("#AirlineSelect")&&($Doms.AirlineSelectControl=t("#AirlineSelect")[0]);t("#Airline")&&($Doms.AirlineControl=t("#Airline")[0]);var ni=t(".searchbox"),it=t("#ReturnDepartDate1TextBox"),y=t("#changecityid"),ti=r.getElementById("DDate2"),ki=t("#searchBox li:first label"),ii=t("#searchBox :radio[name=FlightSearchType]"),ri=t("#searchBox>li:first label"),at,s="S";it.bind("blur",function(){this.value!=""&&this.value!=this.getAttribute("mod_notice_tip")&&s=="S"&&(t("#radio_D").attr("disSelect",1),t("#radio_D").trigger("click"))});y.attr("tabindex",-1).attr("hidefocus",!0);y.bind("click",function(n){var i,r,u;n.preventDefault();i=t("#DepartCity1TextBox")[0].value;t("#DepartCity1TextBox")[0].value=t("#ArriveCity1TextBox")[0].value;t("#ArriveCity1TextBox")[0].value=i;r=t("#DCity1")[0].value;t("#DCity1")[0].value=t("#ACity1")[0].value;t("#ACity1")[0].value=r;t("#DepartCity1TextBox").trigger("change");t("#ArriveCity1TextBox").trigger("change");u=t("#DepartCity1TextBox")[0].className+"";t("#DepartCity1TextBox")[0].className=t("#ArriveCity1TextBox")[0].className+"";t("#ArriveCity1TextBox")[0].className=u});t.browser.isIE6&&(y.attr("unselectable","on"),y[0].onfocus=function(){this.blur()});var vt=t.browser.isIPad||t.browser.isIPhone||t.browser.isIPadUCWeb,yt=function(n,r){s=n;t("#radio_"+n)[0].checked=!0;y.css("display","inline-block");var u="";switch(n){case"S":u="search_single";it.value("");i.inits[it.attr("id")].method("checkValue");ti.value="";setTimeout(function(){i.canlendarRef.DepartDate1TextBox.method("setWeek",t("#DepartDate1TextBox"))});break;case"D":u="search_goback";setTimeout(function(){i.canlendarRef.DepartDate1TextBox.method("setWeek",t("#DepartDate1TextBox"));i.canlendarRef.ReturnDepartDate1TextBox.method("setWeek",t("#ReturnDepartDate1TextBox"))});break;case"M":u="search_multiple";y.css("display","none");setTimeout(function(){i.canlendarRef.DepartDate1TextBox2.method("setWeek",t("#DepartDate1TextBox2"));i.canlendarRef.DepartDate2TextBox.method("setWeek",t("#DepartDate2TextBox"))})}ni.removeClass("search_single").removeClass("search_goback").removeClass("search_multiple").addClass(u);r?at(n):vt||(n=="D"&&t("#radio_D").attr("disSelect")==1?t("#radio_D").attr("disSelect",0):setTimeout(function(){i.adressMod.DepartCity1TextBox.method("focus",{isHidden:!0,isSelected:!0})},100))},pt=(t.config("charset")=="big5"?"B":"")+"LastSearch";at=function(){var u=n.Utils.now("Ymd","/"),r=Date.parse(u);return function(f){var e=n.Utils.Cookie.get(pt+"_"+f),s,o,h;e?(e=e.split("$"),s=e[3]?Date.parse(e[3].replace(/-/g,"/")):0,e[1]&&(t("#DepartCity1TextBox").value(e[1]),i.inits.DepartCity1TextBox.method("checkValue")),e[2]&&t("#DCity1").value(e[2]),e[4]&&(t("#ArriveCity1TextBox").value(e[4]),i.inits.ArriveCity1TextBox.method("checkValue")),e[5]&&t("#ACity1").value(e[5]),s<r&&(e[3]=""),t("#DepartDate1TextBox").value(e[3]),i.inits.DepartDate1TextBox.method("checkValue"),i.canlendarRef.DepartDate1TextBox.method("setWeek",t("#DepartDate1TextBox")),t("#DepartDate1TextBox2").value(e[3]),i.inits.DepartDate1TextBox2.method("checkValue"),i.canlendarRef.DepartDate1TextBox2.method("setWeek",t("#DepartDate1TextBox2")),t("#DepartDate2TextBox").data("minDate",e[3]),t("#ReturnDepartDate1TextBox").data("minDate",e[3]),o=e[6]?Date.parse(e[6].replace(/-/g,"/")):0,f=="S"||f=="D"?(f=="D"&&o>=r&&o>=s?t("#ReturnDepartDate1TextBox").value(e[6]):t("#ReturnDepartDate1TextBox").value(""),setTimeout(function(){t("#DepartDate2TextBox").value("");i.inits.DepartDate2TextBox.method("checkValue");i.inits.ReturnDepartDate1TextBox.method("checkValue")},1)):(o>=r&&o>=s?(t("#DepartDate2TextBox").value(e[6]),i.canlendarRef.DepartDate2TextBox.method("setWeek",t("#DepartDate2TextBox"))):t("#DepartDate2TextBox").value(""),i.inits.DepartDate2TextBox.method("checkValue"),i.canlendarRef.DepartDate1TextBox2.method("setWeek",t("#DepartDate1TextBox2")),e[7]=e[7]||"",t("#TransitCityTextBox").value(e[7]),t("#TransitCityTextBox").trigger("change").trigger("blur"),i.inits.TransitCityTextBox.method("checkValue"),e[8]&&t("#TransitCity").value(e[8]))):(t("#DepartCity1TextBox").value()==""||t("#DCity1").value()=="")&&(t("#DepartCity1TextBox").value("上海"),i.inits.DepartCity1TextBox.method("checkValue"),t("#DCity1").value("SHA"),h=u.replace(/\//g,"-"),t("#DepartDate1TextBox").value(""),i.inits.DepartDate1TextBox.method("checkValue"),t("#DepartDate1TextBox2").value(""),i.inits.DepartDate1TextBox2.method("checkValue"),t("#DepartDate2TextBox").data("minDate",h),t("#ReturnDepartDate1TextBox").data("minDate",h));vt||setTimeout(function(){i.adressMod.DepartCity1TextBox.method("focus",{isHidden:!0,isSelected:!0})},100)}}();rt=t(":radio[name=ClassType]");t.browser.isIE6&&rt.each(function(n){n.parent().bind("click",function(n){t(n.target).is("label")&&(t(n.target).find("input").trigger("click"),t(n.target).find("input")[0].checked=!0)})});t("#SendTicketTextBox").value("");t("#SendTicketTextBox").trigger("blur").trigger("change");try{t("select[name=PassengerQuantity]").find("option")[0].selected=!0;rt[0].checked=!0;t("#AirlineSelect").find("option")[0].selected=!0;t("#SendTicketCity").value("")}catch(bi){}ut=!1;n.registerAdressEvent=function(){var u,o,f,s,h,e,c;if(!ut){for(ut=!0,ii.bind("click",function(){var n=this.value;setTimeout(function(){yt(n)},20)}),t.browser.isIE6&&ri.bind("click",function(n){var i=t(n.target);i.is("label")&&i.find(":radio").trigger("click")}),u=n.location.search.substr(1),o={},u=u.split("&"),f=0;f<u.length;f++)u[f]&&u[f].indexOf("=")>-1&&(u[f]=u[f].split("="),u[f][0]&&(o[u[f][0]]=u[f][1]));u&&o.AutoInput&&o.AutoInput=="true"?(s=o.ACity1,h=o.RelDDate||"",h&&(e=n.Utils.now(),e.setDate(e.getDate()*1+h*1),DDate_str=e.getFullYear()+"-",DDate_str+=e.getMonth()+1+"-",DDate_str+=e.getDate()<10?"0"+e.getDate():e.getDate()),setTimeout(function(){t("#radio_S").trigger("click");r.getElementById("DepartDate1TextBox").value=DDate_str;r.getElementById("DDate1").value=DDate_str;i.inits.DepartDate1TextBox.method("checkValue");DDate_str&&i.canlendarRef.DepartDate1TextBox.method("setWeek",t("#DepartDate1TextBox"))},100),n.Utils.CITYCODE.ready(function(n){r.getElementById("ACity1").value=s;r.getElementById("ArriveCity1TextBox").value=n[s].split("|")[0];i.inits.ArriveCity1TextBox.method("checkValue")})):(c=n.Utils.Cookie.get(pt+"SearchType")||"S",yt(c,!0))}};n.SetSearchCookie=function(){var u="",f=s,i,e,o;f=="D"&&v(t("#ReturnDepartDate1TextBox")[0])&&(f="S");switch(f){case"S":u="S$"+t("#DepartCity1TextBox").value()+"$"+t("#DCity1").value()+"$"+t("#DepartDate1TextBox").value()+"$"+t("#ArriveCity1TextBox").value()+"$"+t("#ACity1").value();break;case"D":u="D$"+t("#DepartCity1TextBox").value()+"$"+t("#DCity1").value()+"$"+t("#DepartDate1TextBox").value()+"$"+t("#ArriveCity1TextBox").value()+"$"+t("#ACity1").value()+"$"+t("#ReturnDepartDate1TextBox").value();break;case"M":u="M$"+t("#DepartCity1TextBox").value()+"$"+t("#DCity1").value()+"$"+t("#DepartDate1TextBox2").value()+"$"+t("#ArriveCity1TextBox").value()+"$"+t("#ACity1").value()+"$"+t("#DepartDate2TextBox").value()+"$"+t("#TransitCityTextBox").value()+"$"+t("#TransitCity").value()}u=escape(u);i=r.domain.split(".").slice(r.domain.indexOf(".hk")!==-1?-3:-2).join(".");e=t.config("charset")=="big5"?"B":"";n.Utils.Cookie.set(e+"LastSearch_"+f,u,30,i);n.Utils.Cookie.set(e+"LastSearchSearchType",f,30,i);o=n.Utils.now();o.setTime(o.getTime()-1);r.cookie=e+"LastSearch_"+f+"=none; expires="+o.toGMTString()+"; path=/"+(i?"; domain=flights"+i:"");r.cookie=e+"LastSearchSearchType=none; expires="+o.toGMTString()+"; path=/"+(i?"; domain=flights"+i:"")};wt=function(n){var i=[],t;for(t in n)n.hasOwnProperty(t)&&i.push(t+"="+n[t]);return i.join("&")};ft=t("#J_filghtSearch");et=r.getElementById("J_filghtSearch2");var si=t("#DepartCity1TextBox")[0],hi=t("#ArriveCity1TextBox")[0],ot=t("#DepartDate1TextBox")[0],k=t("#ReturnDepartDate1TextBox")[0],ci=t("#PassengerQuantity")[0];d=r.getElementById("airHotelPame");bt=d.action||"http://vacations.ctrip.com/diy/";n.RedirectToFlthotelAction=function(){if(lt(!0)&&n.Utils.ALLCITY.Inited){var f,e,r=t("#DCity1")[0].value,u=t("#ACity1")[0].value;if(n.Utils.ALLCITY[r])f=n.Utils.ALLCITY[r].PingYin+n.Utils.ALLCITY[r].Id;else return setTimeout(function(){i.validateObj.method("show",{$obj:t("#DepartCity1TextBox"),data:t("#DepartCity1TextBox")[0].value+" 没有机场",removeErrorClass:!0,hideEvent:"blur",isFocus:!0})},30),!1;if(n.Utils.ALLCITY[u])e=n.Utils.ALLCITY[u].PingYin+n.Utils.ALLCITY[u].Id;else return setTimeout(function(){i.validateObj.method("show",{$obj:t("#ArriveCity1TextBox"),data:t("#ArriveCity1TextBox")[0].value+" 没有机场",removeErrorClass:!0,hideEvent:"blur",isFocus:!0})},30),!1;o("FromTime",ot.value,"airHotelPame","input");k.value!=""?o("ToTime",k.value,"airHotelPame","input"):o("ToTime",ai(ot.value,2),"airHotelPame","input");o("FromCity",t("#DCity1")[0].value,"airHotelPame","input");o("FromCityName",si.value,"airHotelPame","input");o("ToCity",t("#ACity1")[0].value,"airHotelPame","input");o("ToCityName",hi.value,"airHotelPame","input");o("Adults",ci.value,"airHotelPame","input");o("Children",0,"airHotelPame","input");o("RoomNum",1,"airHotelPame","input");k.value!=""?o("Nights",li(ot.value,k.value),"airHotelPame","input"):o("Nights",1,"airHotelPame","input");d.action=(bt+"/round-"+f+"-"+e+"/").toLowerCase();d.submit()}return!1};t("#radio_S"+(n.Utils.Cookie.get((t.config("charset")=="big5"?"B":"")+"LastSearchSearchType")||"S")).trigger("click");t("#DCityCodeFlightSearch")[0].value="";t("#ACityCodeFlightSearch")[0].value="";kt={S:{DepartCity1TextBox:"ArriveCity1TextBox",ArriveCity1TextBox:"DepartDate1TextBox"},D:{DepartCity1TextBox:"ArriveCity1TextBox",ArriveCity1TextBox:"DepartDate1TextBox",DepartDate1TextBox:"ReturnDepartDate1TextBox"},M:{DepartCity1TextBox:"DepartDate1TextBox2",DepartDate1TextBox2:"TransitCityTextBox",TransitCityTextBox:"DepartDate2TextBox",DepartDate2TextBox:"ArriveCity1TextBox"}};t("#search_btn").bind("click",function(n){return n.preventDefault(),ei(),!1});t("#search_btn").bind("keydown",function(n){n.keyCode==13&&t(this).trigger("click")});t("div.search_form input").bind("keydown",function(n){var r=t(this),i=n.keyCode||n.charCode;i==9&&(t.browser.isIE6||t.browser.isIE7)&&r.attr("id")=="DepartCity1TextBox"&&t("#changecityid").css("display")!="none"&&setTimeout(function(){t("#ArriveCity1TextBox")[0].focus()},10);i==13&&g(this.id,!0)});var c=!0,b={sideBar:"2.0",address:"1.0",calendar:"6.0",notice:"1.0",validate:"1.1"},dt=["http://webresource.c-ctrip.com/code/cquery/resource/address/"],vi=10,yi=".c_address_select {font-family: Arial,Simsun;font-size: 12px;}.c_address_select .c_address_wrap {background: none repeat scroll 0 0 #FFFFFF;border: 1px solid #7F9DB9;margin: 0;padding: 0 0 4px;text-align: left;width: 300px;}.c_address_select .c_address_wrong{height:auto;overflow:hidden;padding:5px 10px;line-height:18px;color:#C01111;word-break:break-all;word-wrap:break-word;}.c_address_select .c_address_list {margin: 0;max-height: 600px;padding: 0;}.c_address_select .c_address_list a {border-bottom: 1px solid #FFFFFF;border-top: 1px solid #FFFFFF;color: #0055AA;cursor: pointer;display: block;height: 22px;line-height: 22px;min-height: 22px;overflow: hidden;padding: 1px 9px 0;text-align: left;text-decoration: none;}.c_address_select .c_address_list a:hover {background: none repeat scroll 0 0 #E8F4FF;border-bottom: 1px solid #7F9DB9;border-top: 1px solid #7F9DB9;}.c_address_select .c_address_list span {float: right;font: 10px/22px verdana;margin: 0;overflow: hidden;padding: 0;text-align: right;white-space: nowrap;width: 110px;}.c_address_select .c_address_pagebreak {display: none;line-height: 25px;margin: 0;padding: 0;text-align: center;}.c_address_select .c_address_pagebreak a {color: #0055AA;display: inline-block;font-family: Arial,Simsun,sans-serif;font-size: 14px;margin: 0;padding: 0 4px;text-align: center;text-decoration: underline;width: 15px;}.c_address_select .c_address_pagebreak a.address_current {color: #000; text-decoration: none;}.c_address_select .c_address_list .nearby {color:#333;}.c_address_select .c_address_list .none {cursor:default;}.c_address_select .c_address_list .none:hover {border-top:1px solid #FFF;border-bottom:1px solid #FFF;background-color:#FFF;}.c_address_select .c_address_list i {font-style:normal;color:#999;}.address_selected { background: none repeat scroll 0 0 #FFE6A6; color: #FFFFFF; height: 22px; }.c_address_list .hover {background: none repeat scroll 0 0 #E8F4FF;border-bottom: 1px solid #7F9DB9;border-top: 1px solid #7F9DB9;}",pi=".address_hot{background-color:#FFFFFF;font-size:12px;width:332px;padding-top:5px;border:1px solid #999;"+(t.browser.isIE6?"position:static;":"")+"}.address_hotcity{color:#999;height:24px;line-height:24px;padding:0 10px}.address_hotcity .close{float:right;width:20px;height:20px;margin-top:3px;text-align:center;font:bold 16px/20px Simsun;text-decoration:none;color:#666}.address_hotlist{overflow:hidden;padding:5px}address_hot li,.address_hot_abb,.address_hot_adress{list-style:none outside none;margin:0;padding:0}.address_hot_abb{border-bottom:1px solid #5DA9E2;padding-bottom:20px}.address_hot_abb li{color:#005DAA;cursor:pointer;float:left;height:20px;line-height:20px;list-style-type:none;text-align:center}.address_hot_abb li span{padding:0 8px}.address_hot_abb li .hot_selected{background-color:#FFFFFF;border-color:#5DA9E2;border-style:solid;border-width:1px 1px 0;color:#000000;display:block;font-weight:bold;padding:0 7px}ul.address_hot_adress{padding-left:30px;padding-top:4px}dl.address_hot_adress{padding-left:30px;padding-top:4px}.address_hot_adress li{float:left;height:24px;overflow:hidden;width:67px}.address_hot_adress li a{border:1px solid #FFFFFF;color:#000000;display:block;height:22px;line-height:22px;padding-left:5px}.address_hot_adress li a:hover{background-color:#E8F4FF;border:1px solid #ACCCEF;text-decoration:none}.address_hot_adress a{text-decoration:none}.address_hot_adress dt{float:left;_display:inline;width:20px;margin-left:-25px;text-align:center;font-family:Verdana;color:#E56700;line-height:22px}.address_hot_adress dd{overflow:hidden;*zoom:1}.address_hot_adress dd a{float:left;width:65px;height:22px;padding-left:5px;float:left;border:1px solid #FFFFFF;color:#000;line-height:22px;overflow:hidden}.address_hot_adress dd a:hover{border:1px solid #ACCCEF;background-color:#E8F4FF;text-decoration:none}",h=null,wi=function(n,t,i,r){h={};var u=[],f=0,e=new RegExp("@"+t.toReString()+".+","i"),o=new RegExp("@.+\\|([a-z]{3},)*"+t.toReString()+".+","i"),s=new RegExp("[a-z]","i"),c=function(n,i){var h=0,l=!1,c=i.split("|");if(r){if(c[1]!=t)return;u[f++]={left:c[0],right:c[1],data:i,sortPrioity:h}}else""!=c[6]&&(h-=200),c[1].indexOf("(")>0&&(h-=1),c[0].indexOf("Shanhaiguan")>-1&&(h-=5),1==t.length?s.test(t)?(l=e.test(n),h+=100):(l=o.test(n),h+=50):1<t.length&&(e.test(n)&&(h+=100,l=!0),o.test(n)&&(0==c[4].indexOf(t.toUpperCase())&&(h+=50),0==c[2].indexOf(t.toUpperCase())&&(h+=10),l=!0)),l&&isNaN(t)&&(u[f++]={left:c[0],right:c[1],data:i,priority:h})};return n.replace(new RegExp("@([^@]*"+t.toReString()+"[^@]*)","gi"),c),r||u.sort(function(n,t){return n.priority==t.priority?n.data<t.data?-1:n.data>t.data?1:0:n.priority>t.priority?-1:1}),h=u,u};i.extend=function(){var r=arguments,n=r.length==1?i:r[0],u=r.length>1?r[1]:r[0],t;if(u==null)return n;try{for(t in u)n.hasOwnProperty(u[t])||(typeof n=="object"&&(n[t]=u[t])||typeof n=="function"&&(n.prototype[t]=u[t]));return n}catch(f){}};i.extend({matchNode:function(n,t,i){for(var r=n[i];r;r=r[t])if(r.nodeType==1)return r;return null},next:function(){return i.matchNode(arguments[0],"nextSibling","nextSibling")}});i.extend({inits:{},elements:t("[mod]"),charset:cQuery.config("charset"),getValidate:function(){return t(r).regMod("validate",b.validate)},registerAll:function(){for(var o=i.elements,n=[],e,u,r,h,f=0,s=o.length;f<s;f++)if(e=o[f],u=e.getAttribute("mod"),u){if(n=u.indexOf("|")!=-1?u.split("|"):u,typeof n=="string"){pageConfig.isOpenPOIAddress&&n=="address"&&(n="poi_address");i["register_"+n](t(e));continue}for(r=0,h=n.length;r<h;r++)pageConfig.isOpenPOIAddress&&n[r]=="address"&&(n[r]="poi_address"),i["register_"+n[r]](t(e))}},register_address:function(f){var a=t("#LowestPriceDepartCity").parent(),e=r.getElementById("CityPopTip"),l,o,s;if(!e){e=r.createElement("div");e.id="CityPopTip";e.className="poptip";e.style.display="none";try{e.innerHTML='<span class="poptip-arrow poptip-arrow-left"><em>◆<\/em><i>◆<\/i><\/span>'+i.msg.ERROR_FLIGHT[2]}catch(v){e.innerHTML='<span class="poptip-arrow poptip-arrow-left"><em>◆<\/em><i>◆<\/i><\/span>出发城市不能和到达城市相同'}a.append(e)}l=f[0].getAttribute("focus_loader");o={};o.suggestion=newPageTemp;o.filter=newFliterTemp;o.filterPageSize=vi;o.suggestionStyle=pi;o.filterStyle=yi;o.suggestionInit=function(n){function o(){var t=this;i.each(function(n,i){n[0]==t?(n.addClass("hot_selected"),r[i].style.display=""):(n.removeClass("hot_selected"),r[i].style.display="none")});n.cover()}for(var i=n.find("span"),r=n.find("dl"),e=n.find("ul"),s,h,u,t=0;t<r.length;t++)e.push(r[t]);if(r=e,i.length){for(s=30,t=0,h=i.length;t<h;t++)s+=i[t].offsetWidth;u=n.find("div").first();u[0]&&u.css("width","335px");i.bind("mousedown",o);o.apply(i[0]);n.find(".close").bind("mousedown",function(){c=!1;f[0].blur();setTimeout(function(){c=!0},10)})}};s=function(f){var s=f[0].getAttribute("mod_address_source"),p=f[0].getAttribute("id"),v=t("#"+f[0].getAttribute("mod_address_reference")),y=["^0$","^1$","^2$","^3$","^4$","^5$","^0","^1","^2","^3","^4","^5","0","1","2","3","4","5"],l,a;t.browser.isIPad||(y=wi);l={};f[0].getAttribute("mod_address_tpl")!="on"||t.browser.isIPad||(l=o);s=="fltDomestic"&&(s="flight");t.browser.isIPad&&(s="flight/flight");i.adressMod||(i.adressMod={});a=i.adressMod[f.attr("id")]=f.regMod("address",b.address,{name:p,jsonpSource:dt[0]+s+"_"+i.charset+".js"+n.Utils.releaseno,template:l,isAutoCorrect:!0,relate:{2:v},sort:y});f.bind("keydown",function(n){n.keyCode==9&&(h&&h[0]&&f.value()!=h[0].right&&(f.value(h[0].right),v.value(h[0].data.split("|")[2]),f.trigger("chage")),h=[])});a.method("bind","change",function(i,o){var p,y,v;if(h=[],f.is("#LowestPriceDepartCity")||f.is("#LowestPriceArriveCity")){if(o.value=="")return f.value(f.attr("data-oldval")),u.CITYCODE.ready(function(n,i){setTimeout(function(){t("#"+f.attr("mod_address_reference")).value(i[f.value()])},30)}),!1;var w=function(i){if(f[0].blur(),f.attr("data-oldval")!=i){f.attr("data-oldval",i);var r=t("#HiddenLowestPriceDepartCity").value(),u=t("#HiddenLowestPriceArriveCity").value();if(r=r.split(",")[0],u=u.split(",")[0],t("#HiddenLowestPriceDepartCity").value(r),t("#HiddenLowestPriceArriveCity").value(u),u==r||t("#LowestPriceDepartCity").value()==t("#LowestPriceArriveCity").value())return e.style.display="block",f.addClass("error"),f.attr("data-oldval",t("#LowestPriceDepartCity").value()),!1;e.style.display="none";t("#LowestPriceDepartCity").removeClass("error");t("#LowestPriceArriveCity").removeClass("error");n.Utils.Calendar.render()}},l=o.items.code,s=o.items.name;return u.CITYCODE.ready(function(i,r){if(s.indexOf("__")>-1)s=s.replace("__","").replace("-",""),f.value(s),t("#"+f.attr("mod_address_reference")).value(r[s]),w(s);else if(i[l.indexOf(",")?l.split(",")[0]:l]||l=="GOQ"||l=="ENY")w(s);else{f.attr("data-oldval","");var u=t.config("charset")=="gb2312"?"没有机场":"沒有機場";n.Utils.Calendar.showTip("很抱歉，"+s+u)}}),!1}if(o.value=="")return this.blur(),!1;if(this.value.indexOf("__")>0)for(p=this.value.replace("__","").replace("-",""),y=a.get("source").data.split("@"),v=0;v<y.length;v++)if(p==y[v].split("|")[1]){this.value=p;r.getElementById(this.getAttribute("mod_address_reference")).value=y[v].split("|")[2];break}c==!0&&g(this.id)})};l?f.bind("focus",s.bind(this,f)):s(f);setTimeout(function(){n.registerAdressEvent&&n.registerAdressEvent()},30)},register_poi_address:function(f){var l=t("#LowestPriceDepartCity").parent(),e=r.getElementById("CityPopTip"),s;if(!e){e=r.createElement("div");e.id="CityPopTip";e.className="poptip";e.style.display="none";try{e.innerHTML='<span class="poptip-arrow poptip-arrow-left"><em>◆<\/em><i>◆<\/i><\/span>'+i.msg.ERROR_FLIGHT[2]}catch(v){e.innerHTML='<span class="poptip-arrow poptip-arrow-left"><em>◆<\/em><i>◆<\/i><\/span>出发城市不能和到达城市相同'}l.append(e)}var a=f[0].getAttribute("focus_loader"),o={};o.suggestion='<div class="address_hot" id="address_hot" style="padding:10px;">                            <div class="address_hotcity_fd"><a href="" class="close">×<\/a>支持中文/拼音/简拼输入<\/div>                            <div class="address_hotlist">                                <ol class="address_hot_abb">                                    {{enum(key) data}}                                    <li><span class="hot_selected">${key}<\/span><\/li>                                    {{/enum}}                                <\/ol>                                {{enum(key,arr) data}}                                    {{if key=="热门"}}                                        <ul class="address_hot_adress layoutfix">                                        {{each arr}}                                        <li><a data="${data}" href="javascript:void(0);">${display}<\/a><\/li>                                        {{/each}}                                        <\/ul>                                    {{else}}                                        <dl class="address_hot_adress layoutfix">                                        {{enum(subKey,subArr) arr}}                                            <dt>${subKey}<\/dt>                                            <dd>                                        {{if !subArr.length>0}}                                        &nbsp;                                        {{/if}}                                            {{each subArr}}                                            <a href="javascript:;" title="${display}" data="${data}">${display}<\/a>                                            {{/each}}                                        <\/dd>                                        {{/enum}}                                        <\/dl>                                    {{/if}}                                {{/enum}}                            <\/div>                        <\/div>';o.suggestionStyle=".address_hot { background-color: #FFFFFF; font-size: 12px; width: 332px; padding-top:5px; border:1px solid #999; position:static }                         .address_hotcity_fd { color: #999; margin-bottom: 10px;}                         .address_hotcity_fd .close { float:right; width:20px; height:20px; margin-top:3px; text-align:center; font:bold 16px/20px Simsun; text-decoration:none; color:#666; }                         .address_hotlist { overflow: hidden; }                         .address_hot li,  .address_hot_abb,  .address_hot_adress { list-style: none outside none; margin: 0; padding: 0; }                         .address_hot_abb { width: 100%;height: 22px;margin-bottom: 2px;margin-top: 0;border-bottom: 2px solid #ccc;}                         .address_hot_abb li {position: relative;float: left;display: inline;margin-right: 2px;line-height: 22px;cursor: pointer;margin-bottom: -2px;}                         .address_hot_abb li span { padding: 0 8px; font-family: Verdana; }                         .address_hot_abb li .hot_selected {border-top:0;border-left:0;border-right:0;border-bottom: 2px solid #06c;font-weight: bold;color: #06c; height: 22px; display: inline-block;}                         ul.address_hot_adress { padding-top: 4px; }                         dl.address_hot_adress { padding-left:30px; padding-top: 4px; clear:both; }                         .address_hot_adress li { float: left; height: 24px; overflow: hidden; width: 67px;padding-right: 2px; }                         .address_hot_adress li a { color: #000; display: block; height: 22px; line-height: 22px; padding-left: 8px; }                         .address_hot_adress li a:hover { background-color:#2577E3; color: #FFF; text-decoration: none; }                         .address_hot_adress a { text-decoration: none; }                         .address_hot_adress dt { float:left; _display:inline; width:20px; margin-left:-25px; text-align:center; font-family:Verdana; color:#E56700; line-height:22px; }                         .address_hot_adress dd { overflow:hidden; *zoom:1;}                         .address_hot_adress dd a { width:52px; padding-left: 8px; height:22px; float:left; color:#000; line-height:22px; overflow:hidden; margin:0 2px 2px 0; }                         .address_hot_adress dd a:hover { background-color:#2577E3; color: #FFF; text-decoration: none; }";o.suggestionInit=function(n){function o(){var t=this;i.each(function(n,i){n[0]==t?(n.addClass("hot_selected"),r[i].style.display=""):(n.removeClass("hot_selected"),r[i].style.display="none")});n.cover()}for(var i=n.find("span"),r=n.find("dl"),e=n.find("ul"),s,h,u,t=0;t<r.length;t++)e.push(r[t]);if(r=e,i.length){for(s=30,t=0,h=i.length;t<h;t++)s+=i[t].offsetWidth;u=n.find("div").first();u[0]&&u.css("width","365px");i.bind("mousedown",o);o.apply(i[0]);n.find(".close").bind("mousedown",function(){c=!1;f[0].blur();setTimeout(function(){c=!0},10)})}};s=function(f){var s=f[0].getAttribute("mod_address_source"),v=f[0].getAttribute("id"),l=t("#"+f[0].getAttribute("mod_address_reference")),a={};f[0].getAttribute("mod_address_tpl")!="on"||t.browser.isIPad||(a=o);s=="fltDomestic"&&(s="flight");t.browser.isIPad&&(s="flight/flight");i.adressMod||(i.adressMod={});$LAB.script(WebResourcePath+"/javascript/poi-address.js",function(){var o=i.adressMod[f.attr("id")]=f.regMod("address_poi","1.0",{name:v,jsonpSource:dt[0]+s+"_"+i.charset+".js?"+n.Utils.releaseno,template:a,isAutoCorrect:!0,relate:{3:l},jsonpFilter:"http://"+n.location.host+"/domestic/poi?channel=1&mode=1&f=2&key=${key}"}),y;f.bind("keydown",function(n){n.keyCode==9&&(h&&h[0]&&f.value()!=h[0].right&&(f.value(h[0].right),l.value(h[0].data.split("|")[2]),f.trigger("chage")),h=[])});o.method("bind","change",function(i,s){var p,y,v;if(h=[],f.is("#LowestPriceDepartCity")||f.is("#LowestPriceArriveCity")){if(s.value=="")return f.value(f.attr("data-oldval")),u.CITYCODE.ready(function(n,i){setTimeout(function(){t("#"+f.attr("mod_address_reference")).value(i[f.value()])},30)}),!1;var w=function(i){if(f[0].blur(),f.attr("data-oldval")!=i){f.attr("data-oldval",i);var r=t("#HiddenLowestPriceDepartCity").value(),u=t("#HiddenLowestPriceArriveCity").value();if(r=r.split(",")[0],u=u.split(",")[0],t("#HiddenLowestPriceDepartCity").value(r),t("#HiddenLowestPriceArriveCity").value(u),u==r||t("#LowestPriceDepartCity").value()==t("#LowestPriceArriveCity").value())return e.style.display="block",f.addClass("error"),f.attr("data-oldval",t("#LowestPriceDepartCity").value()),!1;e.style.display="none";t("#LowestPriceDepartCity").removeClass("error");t("#LowestPriceArriveCity").removeClass("error");n.Utils.Calendar.render()}},a="",l="";return s.items==undefined?s.data.split("|")[1]:s.items.name,s.items==undefined?(s=s.data.split("|"),l=s[1],a=s.length<=4?s[s.length-1]:s[s.length-2]+","+s[s.length-1]):(a=s.items.code,l=s.items.name),u.CITYCODE.ready(function(i,r){if(l.indexOf("__")>-1)l=l.replace("__","").replace("-",""),f.value(l),t("#"+f.attr("mod_address_reference")).value(r[l]),w(l);else if(i[a.indexOf(",")?a.split(",")[0]:a]||a=="GOQ"||a=="ENY")w(l);else{f.attr("data-oldval","");var u=t.config("charset")=="gb2312"?"没有机场":"沒有機場";n.Utils.Calendar.showTip("很抱歉，"+l+u)}}),!1}if(s.value=="")return this.blur(),!1;if(this.value.indexOf("__")>0)for(p=this.value.replace("__","").replace("-",""),y=o.get("source").data.split("@"),v=0;v<y.length;v++)if(p==y[v].split("|")[1]){this.value=p;r.getElementById(this.getAttribute("mod_address_reference")).value=y[v].split("|")[2];break}c==!0&&g(this.id)});y="input=${input}&use=${use}&type=${type}&menuname=${menuname}&status=${status}&mode=${mode}";o.method("bind","userinput",function(i,r){if(r.eventType==="keydown"||r.eventType==="blur"||r.eventType==="filterMousedown"){var u=(r.target&&r.target.getAttribute("log")||"|").split("|"),f={input:r.value,use:r.autoCorrectValue,type:u[0],status:r.status,mode:"keydown"===r.eventType?1:"filterMousedown"===r.eventType?0:2,menuname:u[1]};try{n.$_bf&&n.$_bf.loaded===!0?n.$_bf.tracklog("fltdomestic.poi",t.tmpl.render(y,f)):setTimeout(function(){n.$_bf.tracklog("fltdomestic.poi",t.tmpl.render(y,f))},500)}catch(e){t.log(e,"setUTB_EDM")}}})})};a?f.bind("focus",s.bind(this,f)):s(f);setTimeout(function(){n.registerAdressEvent&&n.registerAdressEvent()},30)},register_calendar:function(n){var r={date:f.toStdDateString(),container:t.container,autoShow:!1,showWeek:!0};n[0].getAttribute("mod_calendar_reference")&&(r.reference="#"+n[0].getAttribute("mod_calendar_reference"));i.canlendarRef||(i.canlendarRef={});i.canlendarRef[n[0].id]=n.regMod("calendar",b.calendar,{options:r,listeners:{onChange:function(r,u){i.inits[r.id].method("checkValue");t("#radio_S")[0].checked&&r&&r.id=="ReturnDepartDate1TextBox"&&r.value.isDate()&&t("#radio_D").attr("disSelect",1).trigger("click");var f=n.attr("id");(f=="DepartDate1TextBox"||f=="DepartDate1TextBox2")&&(f=="DepartDate1TextBox"?(t("#DepartDate1TextBox2").value(u),t("#DepartDate1TextBox2").trigger("change"),i.inits.DepartDate1TextBox2.method("checkValue")):f=="DepartDate1TextBox2"&&(t("#DepartDate1TextBox").value(u),t("#DepartDate1TextBox").trigger("change"),i.inits.DepartDate1TextBox.method("checkValue")),t("#DepartDate2TextBox").data("minDate",u),t("#ReturnDepartDate1TextBox").data("minDate",u));g(f)}}});n.bind("blur",function(){i.canlendarRef[n[0].id].method("setWeek",n)})},register_notice:function(n){var t=n[0].getAttribute("id"),r=n[0].getAttribute("mod_notice_tip")||"";i.inits[t]=n.regMod("notice",b.notice,{name:t,tips:r,selClass:"inputSel"})}});t.mod.multiLoad(b,function(){i.registerAll();t(r).regMod("sideBar","2.0",{url:{feedBackURL:"http://my.ctrip.com/adv/uxp/Community/CommunityAdvice.aspx?productType=1",liveChatURL:"http://livechat.ctrip.com/livechat/Login.aspx?GroupCode=FlightBookLocal&AsFrom=1|"+i.IndexJsTip.sideBar},title:{}})});n.online=i;i.validateObj=i.getValidate();gt=t.browser.isIPad||t.browser.isIPhone||t.browser.isIPadUCWeb;gt?(t("#DepartDate1TextBox").bind("change",function(){t("#radio_S")[0].checked&&(c=!1)}),t("#ReturnDepartDate1TextBox").bind("change",function(){t("#radio_D")[0].checked&&(c=!1)})):t("html").bind("mousedown",function(){c=!1;setTimeout(function(){c=!0})})}),h=function(t,i,r,u,f,e){t.css("-moz-transition","none");t.css("-webkit-transition","none");t.css("-ms-transition","none");t.css("transition","none");t[0].style.marginLeft="0px";t.parent().get(0).scrollLeft=0;var o=function(i,r){setTimeout(function(){n.Utils.animate(t[0],"marginLeft",i,400,r)},20)};i.unbind("click").bind("click",function(n){n.preventDefault();o(-f+"px",function(){var i=t.find(u),n;try{for(n=0;n<e;n++)t.append(i[n])}catch(r){}t[0].style.marginLeft="0px"})});r.unbind("click").bind("click",function(n){var r,i;n.preventDefault();t.css("-moz-transition","none");t.css("-webkit-transition","none");t.css("-ms-transition","none");t.css("transition","none");r=t.find(u);try{for(i=1;i<=e;i++)t.prepend(r.get(-i))}catch(s){}t[0].style.marginLeft=-f+"px";o("0px",function(){})})},e=t("#HomePageRecommendContainer"),r.addEventListener?(c(parseInt(t(r.body).css("width"))<=1250),s=!1,t(n).bind("resize",function(){s&&clearTimeout(s);s=setTimeout(function(){c(parseInt(t(r.body).css("width"))<=1250)},400)})):c(n.screen.width<=1250),l=t(":radio[name=dynamicType]"),o=t("#divSearchByFlightNumber,#divSearchByCity"),l.bind("click",function(){var n=parseInt(t(this).value(),10);o.get(1-n).style.display="none";o.get(n).style.display="block";this.checked=!0})[0].checked=!0,l.each(function(n){n.parent().bind("click",function(i){t(i.target).is("label")&&n.trigger("click")})}),p=function(i){var u,f;if(i==1){var s=t("#sInvalidNumber")[0],h=t("#iFlightNumber")[0],e=h.value;if(e==null||e==""){n.open("/actualtime/","_blank");return}if(!/^([a-zA-Z]|\d){2}\d{1,4}$/.test(e)){o.get(0).className="dynamic_number dynamic_wrong";s.style.display="";r.getElementById("iFlightNumber").focus();return}o.get(0).className="dynamic_number";n.open("/actualtime/fno-"+e.toLowerCase()+"/","_blank")}else i==2&&(u=t("#DCityCodeFlightSearch")[0].value.replace(",","_"),f=t("#ACityCodeFlightSearch")[0].value.replace(",","_"),u==""&&f==""?n.open("/actualtime/","_blank"):u!=""&&f==""?n.open("/actualtime/depart-"+u.toLowerCase()+"/","_blank"):u==""&&f!=""?n.open("/actualtime/arrive-"+f.toLowerCase()+"/","_blank"):n.open("/actualtime/"+u.toLowerCase()+"-"+f.toLowerCase()+"/","_blank"))},n.SearchSeeoffAndLandingInfo=p,n}(window,cQuery,online)